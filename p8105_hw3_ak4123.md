p8105\_hw3\_ak4123
================

``` r
library(p8105.datasets)
data("brfss_smart2010")

brfss_data = brfss_smart2010 %>% 
  janitor::clean_names() %>% 
  filter(topic == "Overall Health") %>% 
  filter(response == "Excellent" | response == "Very good" | response == "Good" | response == "Fair" | response == "Poor") %>% 
  mutate(response = ordered(response, levels = c("Excellent", "Very good", "Good", "Fair", "Poor")))
```

``` r
brfss_data %>%
  filter(year == 2002) %>% 
  distinct(locationdesc, locationabbr) %>%
  group_by(locationabbr) %>% 
  count() %>% 
  filter(n == 7)
```

    ## # A tibble: 3 x 2
    ## # Groups:   locationabbr [3]
    ##   locationabbr     n
    ##   <chr>        <int>
    ## 1 CT               7
    ## 2 FL               7
    ## 3 NC               7

``` r
brfss_data %>% 
  filter(year >= 2002 & year <= 2010) %>% 
  group_by(locationabbr, year) %>%  
  distinct(locationdesc) %>% 
  summarize(location_count = n()) %>%
  ggplot(aes(x = year, y = location_count, color = locationabbr)) +
    geom_line(size = 0.1) +
    labs(
      title = "Observation Plot",
      x = "Year",
      y = "Number of Observations",
      caption = "BRFSS Data"
    ) +
    viridis::scale_color_viridis(
      name = "State",
      discrete = TRUE
    ) + 
  guides(color = guide_legend(nrow = 6))
```

![](p8105_hw3_ak4123_files/figure-markdown_github/question%201%20questions-1.png)

``` r
brfss_data %>%
  spread(key = response, value = data_value) %>%
  janitor::clean_names() %>% 
  select(year, excellent, locationabbr) %>% 
  filter(!is.na(excellent) & locationabbr == "NY" & (year == "2002" | year == "2006" | year == "2010")) %>%
  group_by(year) %>% 
  summarize(mean_proportion_excellent = mean(excellent), sd_proportion_excellent = sd(excellent)) %>% 
  knitr::kable()
```

|  year|  mean\_proportion\_excellent|  sd\_proportion\_excellent|
|-----:|----------------------------:|--------------------------:|
|  2002|                     24.04000|                   4.486424|
|  2006|                     22.53333|                   4.000833|
|  2010|                     22.70000|                   3.567212|

``` r
##need to edit this because I do not think the proportion is right

brfss_data %>% 
  mutate(proportion = data_value / 100) %>% 
  group_by(year, locationabbr, response) %>% 
  summarize(mean_proportion = mean(proportion)) %>% 
  ggplot(aes(x = year, y = mean_proportion, color = locationabbr)) +
    geom_point(alpha = 0.5) +
    scale_x_continuous(breaks = c(2003, 2006, 2009)) +
    facet_grid(~response) +
    labs(
      title = "Response to Overall Health Question: Broken Down By State for the years 2002 to 2010",
      x = "Year", 
      y = "Mean Proportion",
      caption = "BRFSS Data"
    ) +
    viridis::scale_color_viridis(
      name = "State",
      discrete = TRUE
    )+
    guides(color = guide_legend(nrow = 6))
```

    ## Warning: Removed 21 rows containing missing values (geom_point).

![](p8105_hw3_ak4123_files/figure-markdown_github/question%201%20questions-2.png)

``` r
library(p8105.datasets)
data("instacart")

instacart = instacart %>% 
janitor::clean_names()
```

The dimensions of this dataset are (1384617, 15). This means there are 1384617 observations (rows) and 15 variables (columns). Some of the key variables include the order identification number, product name (along with an identification number), the department and aisle the product is located in. There is also... "order\_id" "product\_id"
\[3\] "add\_to\_cart\_order" "reordered"
\[5\] "user\_id" "eval\_set"
\[7\] "order\_number" "order\_dow"
\[9\] "order\_hour\_of\_day" "days\_since\_prior\_order" \[11\] "product\_name" "aisle\_id"
\[13\] "department\_id" "aisle"
\[15\] "department"

give illustrative examples of observataions.
--------------------------------------------

``` r
##the aisles with the most orders
instacart %>% 
group_by(aisle) %>% 
  count(order_id) %>% 
arrange(desc(n)) %>% 
  head(7)
```

    ## # A tibble: 7 x 3
    ## # Groups:   aisle [5]
    ##   aisle               order_id     n
    ##   <chr>                  <int> <int>
    ## 1 baby food formula    2188545    28
    ## 2 energy granola bars  1385776    28
    ## 3 tea                  2445873    27
    ## 4 yogurt               2606705    26
    ## 5 cat food care        3363902    24
    ## 6 energy granola bars  2397010    24
    ## 7 baby food formula    2070470    23

There are 134 aisle.

### THE MOST ORDERS NEED TO FIX THIS

aisle order\_id n <chr> <int> <int> 1 baby food formula 2188545 28 2 energy granola bars 1385776 28 3 tea 2445873 27 4 yogurt 2606705 26 5 cat food care 3363902 24 6 energy granola bars 2397010 24 7 baby food formula 2070470 23

``` r
instacart %>% 
  group_by(aisle) %>% 
  summarize(amount_ordered = n()) %>% 
  ggplot(aes(x = aisle, y = amount_ordered)) + 
  geom_point() +
  labs(
     title = "Items ordered in each aisle",
     x = "aisle number",
     y = "number of items ordered"
    )
```

![](p8105_hw3_ak4123_files/figure-markdown_github/question%202%20plots-1.png)

``` r
instacart %>% 
  filter(aisle == "baking ingredients" | aisle == 
           "dog food care" | aisle == "packaged vegetables fruits") %>% 
  group_by(product_name, aisle) %>% 
  summarize(most_ordered = n()) %>% 
arrange(desc(most_ordered)) %>% 
group_by(aisle) %>% 
  top_n( n = 1, wt = most_ordered) %>% 
  select(aisle, product_name, most_ordered) %>% 
  rename(top_product_name = product_name) %>% 
  arrange(aisle) %>% 
  knitr::kable()
```

| aisle                      | top\_product\_name                            |  most\_ordered|
|:---------------------------|:----------------------------------------------|--------------:|
| baking ingredients         | Light Brown Sugar                             |            499|
| dog food care              | Snack Sticks Chicken & Rice Recipe Dog Treats |             30|
| packaged vegetables fruits | Organic Baby Spinach                          |           9784|

``` r
instacart %>% 
  filter(product_name == "Pink Lady Apples" | product_name ==  "Coffee Ice Cream") %>% 
select(order_hour_of_day, order_dow, product_name) %>% 
group_by(product_name, order_dow) %>% 
summarize(mean_hour = mean(order_hour_of_day)) %>% 
spread(key = order_dow, value = mean_hour)
```

    ## # A tibble: 2 x 8
    ## # Groups:   product_name [2]
    ##   product_name       `0`   `1`   `2`   `3`   `4`   `5`   `6`
    ##   <chr>            <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>
    ## 1 Coffee Ice Cream  13.8  14.3  15.4  15.3  15.2  12.3  13.8
    ## 2 Pink Lady Apples  13.4  11.4  11.7  14.2  11.6  12.8  11.9

``` r
library(p8105.datasets)
data("ny_noaa") 
```

The dimensions of this dataset are (2595176, 7). This means there are 2595176 observations (rows) and 7 variables (columns). Some of the key variables include "id" "date" "prcp" "snow" "snwd" "tmax" "tmin" MISSING DATA IS AN ISSUE BC ...

``` r
ny_noaa %>%
janitor::clean_names()
```

    ## # A tibble: 2,595,176 x 7
    ##    id          date        prcp  snow  snwd tmax  tmin 
    ##    <chr>       <date>     <int> <int> <int> <chr> <chr>
    ##  1 US1NYAB0001 2007-11-01    NA    NA    NA <NA>  <NA> 
    ##  2 US1NYAB0001 2007-11-02    NA    NA    NA <NA>  <NA> 
    ##  3 US1NYAB0001 2007-11-03    NA    NA    NA <NA>  <NA> 
    ##  4 US1NYAB0001 2007-11-04    NA    NA    NA <NA>  <NA> 
    ##  5 US1NYAB0001 2007-11-05    NA    NA    NA <NA>  <NA> 
    ##  6 US1NYAB0001 2007-11-06    NA    NA    NA <NA>  <NA> 
    ##  7 US1NYAB0001 2007-11-07    NA    NA    NA <NA>  <NA> 
    ##  8 US1NYAB0001 2007-11-08    NA    NA    NA <NA>  <NA> 
    ##  9 US1NYAB0001 2007-11-09    NA    NA    NA <NA>  <NA> 
    ## 10 US1NYAB0001 2007-11-10    NA    NA    NA <NA>  <NA> 
    ## # ... with 2,595,166 more rows

mutate(year = as.numeric(format(datetxt, format = "%Y")) %&gt;%
===============================================================

mutate(month = as.numeric(format(datetxt, format = "%m")) %&gt;%
================================================================

mutate(day = as.numeric(format(datetxt, format = "%d")))
========================================================
