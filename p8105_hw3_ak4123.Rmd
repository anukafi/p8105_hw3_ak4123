---
title: "p8105_hw3_ak4123"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

```{r question 1 data cleaning }
library(p8105.datasets)
data("brfss_smart2010")

brfss_data = brfss_smart2010 %>% 
  janitor::clean_names() %>% 
  filter(topic == "Overall Health") %>% 
  filter(response == "Excellent" | response == "Very good" | response == "Good" | response == "Fair" | response == "Poor") %>% 
  mutate(response = factor(response, levels = ordered(c("Excellent", "Very good", "Good", "Fair", "Poor"))))
```

```{r question 1 questions}
brfss_data %>%
  filter(year == 2002) %>% 
  distinct(locationdesc, locationabbr) %>%
  group_by(locationabbr) %>% 
  count() %>% 
  filter(n == 7)

##spaghetti plot

brfss_data %>%
  spread(key = response, value = data_value) %>%
  janitor::clean_names() %>% 
  select(year, excellent, locationabbr) %>% 
  filter(!is.na(excellent) & locationabbr == "NY" & (year == "2002" | year == "2006" | year == "2010")) %>%
  group_by(year) %>% 
  summarize(mean_proportion_excellent = mean(excellent), sd_proportion_excellent = sd(excellent)) %>% 
  knitr::kable()



#panel plot

```


```{r question 2 cleaning}
library(p8105.datasets)
data("instacart")

instacart = instacart %>% 
janitor::clean_names()
```
The dimensions of this dataset are (`r {dim(instacart)}`). This means there are 1384617 observations (rows) and 15 variables (columns). Some of the key variables include the order identification number, product name (along with an identification number), the department and aisle the product is located in. There is also...
"order_id"               "product_id"            
 [3] "add_to_cart_order"      "reordered"             
 [5] "user_id"                "eval_set"              
 [7] "order_number"           "order_dow"             
 [9] "order_hour_of_day"      "days_since_prior_order"
[11] "product_name"           "aisle_id"              
[13] "department_id"          "aisle"                 
[15] "department"        

## give illustrative examples of observataions.
```{r}

##the aisles with the most orders
instacart %>% 
group_by(aisle) %>% 
  count(order_id) %>% 
arrange(desc(n)) %>% 
  head(7)

```
There are `r {instacart %>% 
  distinct(aisle) %>% 
count()}` aisle. 

###THE MOST ORDERS NEED TO FIX THIS 
aisle               order_id     n
  <chr>                  <int> <int>
1 baby food formula    2188545    28
2 energy granola bars  1385776    28
3 tea                  2445873    27
4 yogurt               2606705    26
5 cat food care        3363902    24
6 energy granola bars  2397010    24
7 baby food formula    2070470    23

```{r question 2 plots}
##plot: number of items ordered in each aisle ... so y is number of items, x is aisle # 

instacart %>% 
  group_by(aisle) %>% 
  summarize(amount_ordered = n()) %>% 
  ggplot(aes(x = aisle, y = amount_ordered)) + 
  geom_point() +
  labs(
     title = "Items ordered in each aisle",
     x = "aisle number",
     y = "number of items ordered"
    )

## table: most popular items

instacart %>% 
  filter(aisle == "baking ingredients" | aisle == 
           "dog food care" | aisle == "packaged vegetables fruits")
group_by(aisle) %>% 
  summarize(most_ordered = n())

## table: mean hour of day 
```

```{r question 3 data import}
library(p8105.datasets)
data("ny_noaa") 
```
The dimensions of this dataset are (`r {dim(ny_noaa)}`). This means there are 2595176 observations (rows) and 7 variables (columns). Some of the key variables include "id"   "date" "prcp" "snow" "snwd" "tmax" "tmin"
MISSING DATA IS AN ISSUE BC ...

```{r question 3 data cleaning}
ny_noaa %>%
janitor::clean_names()
```
#mutate(year = as.numeric(format(datetxt, format = "%Y")) %>% 
#mutate(month = as.numeric(format(datetxt, format = "%m")) %>% 
#mutate(day = as.numeric(format(datetxt, format = "%d")))